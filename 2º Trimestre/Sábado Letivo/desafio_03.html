<script>
    /*
    Aluguel de veículo
    Crie um programa que pergunte ao usuário qual o tipo de veículo que deseja alugar:
    1- Carro
    2- Moto
    3- Caminhão

    Caso o usuário não informe o tipo de veículo que deseja alugar, o programa deve perguntar novamente qual o tipo de 
    veículo que o usuário deseja alugar. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.

    Considerando que escolheu o tipo 1, pergunte qual categoria que pretende, sendo:
    1- Econômico: R$ 100,00 por dia
    2- Intermediário: R$ 150,00 por dia
    3- Luxo: R$ 200,00 por dia

    Caso o usuário não informe a categoria que deseja alugar, o programa deve perguntar novamente qual a categoria que o usuário deseja alugar. 
    Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.

    O programa deverá perguntar ao usuário quantos dias ele deseja alugar o veículo. Caso o usuário informe um valor inválido, o programa 
    deverá perguntar novamente quantos dias ele deseja alugar o veículo. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Após informar a quantidade de dias, o programa deverá perguntar se ele deseja contratar seguro. Caso deseja contratar seguro, o valor 
    diário do seguro custa 10% do preço do veículo. Valide o dado informado pelo usuário e, caso ele não digite um valor válido, o programa deverá ser encerrado após três tentativas incorretas.

    Ao final, o programa deverá informar o valor total do aluguel, considerando o valor do veículo, o valor do seguro (caso contratado) e a 
    quantidade de dias que o veículo foi alugado. Peça também para o usuário informar qual foi a Km percorrida. 
    Valide este dado informado pelo usuário e, não digitando um valor correto por três vezes consecutivas, o programa deverá ser encerrado.

    Caso a Km informada ultrapasse a média de 50 km por dia, o programa deverá informar que o usuário deverá pagar um valor adicional de R$ 1,00 
    por Km excedente. Caso contrário, o programa deverá informar que o usuário não precisará pagar nenhum valor adicional.

    Pergunte também para o usuário, na devolução do veículo, se houveram avarias no veículo. Caso houveram avarias, o programa deverá perguntar ao usuário qual a gravidade das avarias, sendo:
    1- Leve: R$ 100,00
    2- Média: R$ 200,00
    3- Grave: R$ 300,00

    Caso o usuário não informe a gravidade das avarias, o programa deve perguntar novamente qual a gravidade das avarias. 
    Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Ao informar a gravidade das avarias, o programa deverá perguntar a quantidade de avarias daquela categoria e adicionar ao valor a ser pago de aluguel do veículo.

    Pergunte também se houveram mais avarias além daquela categoria já informada. 
    Caso tenham mais avarias, o programa deverá perguntar qual a gravidade das avarias e também a sua respectiva quantidade. 
    Caso não tenham mais avarias, o programa deverá informar o valor total a ser pago pelo aluguel do veículo.

    O programa deverá perguntar ao usuário qual a forma de pagamento desejada, podendo ser:
    1- Dinheiro: 3% de desconto
    2- Cartão de crédito: 5% de acréscimo
    3- Cartão de débito: 3% de acréscimo

    Caso tenha informado incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Também, caso tenha informado a opção 2, o programa deverá perguntar se deseja parcelar o valor do aluguel. 
    O prazo máximo de parcelamento é de 3x sem juros ou, qualquer outro prazo maior, com limite de 12, terá um outro acréscimo na parcela, correspondente com a taxa de juros de 2% ao mês.

    Ao final, o programa deverá informar o valor total a ser pago pelo aluguel do veículo, considerando o valor do veículo, o valor do seguro (caso contratado), a 
    quantidade de dias que o veículo foi alugado, a quantidade de Km percorrida (e o adicional pago por Km percorrido, se for o caso), o 
    valor das avarias (caso houverem) e a forma de pagamento escolhida pelo usuário.
    */

    let tentativasTipoVeiculo = 0;
let tipoVeiculo = parseInt(prompt("Qual tipo de veículo deseja alugar?\n1- Carro\n2- Moto\n3- Caminhão"));

while ((tipoVeiculo !== 1 && tipoVeiculo !== 2 && tipoVeiculo !== 3) && tentativasTipoVeiculo < 3) {
  tipoVeiculo = parseInt(prompt("Tipo de veículo inválido. Por favor, informe novamente:\n1- Carro\n2- Moto\n3- Caminhão"));
  tentativasTipoVeiculo++;
}

if (tentativasTipoVeiculo === 3) {
  alert("Número máximo de tentativas excedido. O programa será encerrado.");
} else {
  let tentativasCategoria = 0;
  let categoria = parseInt(prompt("Qual categoria você deseja?\n1- Econômico\n2- Intermediário\n3- Luxo"));

  while ((categoria !== 1 && categoria !== 2 && categoria !== 3) && tentativasCategoria < 3) {
    categoria = parseInt(prompt("Categoria inválida. Por favor, informe novamente:\n1- Econômico\n2- Intermediário\n3- Luxo"));
    tentativasCategoria++;
  }

  if (tentativasCategoria === 3) {
    alert("Número máximo de tentativas excedido. O programa será encerrado.");
  } else {
    let tentativasDias = 0;
    let quantidadeDias = parseInt(prompt("Quantos dias você deseja alugar o veículo?"));

    while ((isNaN(quantidadeDias) || quantidadeDias <= 0) && tentativasDias < 3) {
      quantidadeDias = parseInt(prompt("Quantidade de dias inválida. Por favor, informe novamente:"));
      tentativasDias++;
    }

    if (tentativasDias === 3) {
      alert("Número máximo de tentativas excedido. O programa será encerrado.");
    } else {
      let tentativasSeguro = 0;
      let contratarSeguro = prompt("Deseja contratar seguro? (S/N)").toUpperCase();

      while ((contratarSeguro !== "S" && contratarSeguro !== "N") && tentativasSeguro < 3) {
        contratarSeguro = prompt("Resposta inválida. Por favor, informe novamente (S/N)").toUpperCase();
        tentativasSeguro++;
      }

      if (tentativasSeguro === 3) {
        alert("Número máximo de tentativas excedido. O programa será encerrado.");
      } else {
        let valorVeiculo = 0;
        let valorSeguro = 0;

        if (tipoVeiculo === 1) {
          if (categoria === 1) {
            valorVeiculo = 100;
          } else if (categoria === 2) {
            valorVeiculo = 150;
          } else if (categoria === 3) {
            valorVeiculo = 200;
          }
        } else if (tipoVeiculo === 2) {
          if (categoria === 1) {
            valorVeiculo = 80;
          } else if (categoria === 2) {
            valorVeiculo = 120;
          } else if (categoria === 3) {
            valorVeiculo = 160;
          }
        } else if (tipoVeiculo === 3) {
          if (categoria === 1) {
            valorVeiculo = 200;
          } else if (categoria === 2) {
            valorVeiculo = 250;
          } else if (categoria === 3) {
            valorVeiculo = 300;
          }
        }

        if (contratarSeguro === "S") {
          valorSeguro = valorVeiculo * quantidadeDias * 0.1;
        }

        let tentativasKm = 0;
        let kmPercorrida = parseFloat(prompt("Informe a quantidade de Km percorrida:"));

        while ((isNaN(kmPercorrida) || kmPercorrida < 0) && tentativasKm < 3) {
          kmPercorrida = parseFloat(prompt("Valor inválido. Por favor, informe novamente:"));
          tentativasKm++;
        }

        if (tentativasKm === 3) {
          alert("Número máximo de tentativas excedido. O programa será encerrado.");
        } else {
          let valorAdicionalKm = 0;
          let mediaKmDia = kmPercorrida / quantidadeDias;

          if (mediaKmDia > 50) {
            valorAdicionalKm = (mediaKmDia - 50) * quantidadeDias;
          }

          let valorAvarias = 0;
          let tentativasAvarias = 0;

          let avariasLeves = parseInt(prompt("Informe a quantidade de avarias leves:"));
          while ((isNaN(avariasLeves) || avariasLeves < 0) && tentativasAvarias < 3) {
            avariasLeves = parseInt(prompt("Valor inválido. Por favor, informe novamente:"));
            tentativasAvarias++;
          }

          if (tentativasAvarias === 3) {
            alert("Número máximo de tentativas excedido. O programa será encerrado.");
          } else {
            let avariasMedias = parseInt(prompt("Informe a quantidade de avarias médias:"));
            while ((isNaN(avariasMedias) || avariasMedias < 0) && tentativasAvarias < 3) {
              avariasMedias = parseInt(prompt("Valor inválido. Por favor, informe novamente:"));
              tentativasAvarias++;
            }

            if (tentativasAvarias === 3) {
              alert("Número máximo de tentativas excedido. O programa será encerrado.");
            } else {
              let avariasGraves = parseInt(prompt("Informe a quantidade de avarias graves:"));
              while ((isNaN(avariasGraves) || avariasGraves < 0) && tentativasAvarias < 3) {
                avariasGraves = parseInt(prompt("Valor inválido. Por favor, informe novamente:"));
                tentativasAvarias++;
              }

              if (tentativasAvarias === 3) {
                alert("Número máximo de tentativas excedido. O programa será encerrado.");
              } else {
                valorAvarias = (avariasLeves * 100) + (avariasMedias * 200) + (avariasGraves * 300);
                let valorTotalAluguel = (valorVeiculo * quantidadeDias) + valorSeguro + valorAdicionalKm + valorAvarias;

                let tentativasFormaPagamento = 0;
                let formaPagamento = parseInt(prompt("Qual a forma de pagamento?\n1- Dinheiro\n2- Cartão de crédito\n3- Cartão de débito"));

                while ((formaPagamento !== 1 && formaPagamento !== 2 && formaPagamento !== 3) && tentativasFormaPagamento < 3) {
                  formaPagamento = parseInt(prompt("Forma de pagamento inválida. Por favor, informe novamente:\n1- Dinheiro\n2- Cartão de crédito\n3- Cartão de débito"));
                  tentativasFormaPagamento++;
                }

                if (tentativasFormaPagamento === 3) {
                  alert("Número máximo de tentativas excedido. O programa será encerrado.");
                } else {
                  if (formaPagamento === 1) {
                    valorTotalAluguel *= 0.97; // Desconto de 3% para pagamento em dinheiro
                  } else if (formaPagamento === 2) {
                    let tentativasParcelamento = 0;
                    let parcelar = prompt("Deseja parcelar o valor do aluguel? (S/N)").toUpperCase();

                    while ((parcelar !== "S" && parcelar !== "N") && tentativasParcelamento < 3) {
                      parcelar = prompt("Resposta inválida. Por favor, informe novamente (S/N)").toUpperCase();
                      tentativasParcelamento++;
                    }

                    if (tentativasParcelamento === 3) {
                      alert("Número máximo de tentativas excedido. O programa será encerrado.");
                    } else {
                      if (parcelar === "S") {
                        let prazoParcelamento = parseInt(prompt("Informe o prazo de parcelamento (em meses):"));

                        while ((isNaN(prazoParcelamento) || prazoParcelamento < 1 || prazoParcelamento > 12) && tentativasParcelamento < 3) {
                          prazoParcelamento = parseInt(prompt("Prazo de parcelamento inválido. Por favor, informe novamente (1-12 meses):"));
                          tentativasParcelamento++;
                        }

                        if (tentativasParcelamento === 3) {
                          alert("Número máximo de tentativas excedido. O programa será encerrado.");
                        } else {
                          if (prazoParcelamento <= 3) {
                            valorTotalAluguel *= 1.02 ** prazoParcelamento; // Acréscimo de 2% ao mês para parcelamento acima de 3 meses
                          } else {
                            valorTotalAluguel *= 1.02 ** 3;
                          }
                        }
                      }
                    }
                  } else if (formaPagamento === 3) {
                    valorTotalAluguel *= 1.03; // Acréscimo de 3% para pagamento no cartão de débito
                  }

                  alert(`Valor total a ser pago: R$ ${valorTotalAluguel.toFixed(2)}`);
                }
              }
            }
          }
        }
      }
    }
  }
}

</script>
